import{A as M,S,i as m}from"./assets/vendor-db5ad915.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const g=15,T=M.create({baseURL:"https://pixabay.com/api/",params:{key:"42121047-6dc093e186e55c34fb150394f",image_type:"photo",orientation:"horizontal",safesearch:"true"}});async function y(t,r){try{return(await T.get("",{params:{q:t,page:r,per_page:g}})).data}catch(a){throw A(a),a}}function f(t){const r=w(t);e.formForImagesGallery.insertAdjacentHTML("beforeend",r)}function w(t){return t.map(({webformatURL:r,largeImageURL:a,tags:n,likes:o,views:s,comments:c,downloads:v})=>`
    <li class="gallery-item">
        <a class="gallery-link" href="${a}">
          <img
            class="gallery-image"
            src="${r}"
            alt="${n}"
          />
          </a>
        <ul class="image-activity">
          <li class="image-activity-item">
            <h4 class="image-activity-type">Likes</h4>
            <p>${o}</p>
          </li>
          <li class="image-activity-item">
            <h4 class="image-activity-type">Views</h4>
            <p>${s}</p>
          </li>
          <li class="image-activity-item">
            <h4 class="image-activity-type">Comments</h4>
            <p>${c}</p>
            <li class="image-activity-item">
            <h4 class="image-activity-type">Downloads</h4>
            <p>${v}</p>
          </li>
          </li>
        </ul>
      </li>`).join("")}const e={searchingForm:document.querySelector(".input-form"),loaderSign:document.querySelector(".loader-container"),formForImagesGallery:document.querySelector(".gallery"),loadMoreButton:document.querySelector(".loadMore-button"),loadMoreButtonTextContent:document.querySelector(".lmbutton-text-content"),loaderLoadMore:document.querySelector(".loadMore"),observeTarget:document.querySelector(".js-target"),scrollLoader:document.querySelector(".loadMorescroll"),iternalScrollOption:document.querySelector('input[name="iternal-scroll"]')};let l=0,i=1,d="",L=!1;const h={initial:"Load more",onLoad:"Loading images"};let B={root:document.querySelector("#scrollArea"),rootMargin:"0px",threshold:1};async function C(){const t=await y(d,i);l=Math.ceil(t.total/g),e.scrollLoader.classList.add("hide"),f(t.hits),p.refresh()}let I=(t,r)=>{t.forEach(a=>{if(a.isIntersecting){i=i+1,e.scrollLoader.classList.remove("hide"),C(),e.imagesGalleryItem=document.querySelector(".gallery-item");let n=3*Math.ceil(e.imagesGalleryItem.getBoundingClientRect().height);window.scrollBy({top:n,behavior:"smooth"}),i>=l&&(r.unobserve(e.observeTarget),e.observeTarget.classList.add("hide"),b())}})};const u=new IntersectionObserver(I,B);e.searchingForm.addEventListener("submit",G);e.loadMoreButton.addEventListener("click",P);e.iternalScrollOption.addEventListener("change",E);function q(){m.warning({color:"red",message:"Sorry, there are no images matching your search query. Please try again!",position:"topCenter"})}function O(){m.warning({color:"red",message:"TYPE SOME WORD/WORDS, PLEASE!",position:"topCenter"})}function b(){m.info({timeout:3e3,message:"We're sorry, but you've reached the end of search results. ",position:"topCenter"})}function x(){e.formForImagesGallery.innerHTML=""}function A(t){m.error({timeout:3e3,message:`An error: ${t} occurred while processing your request `,position:"topCenter"})}function E(){if(L)e.iternalScrollOption.checked?(e.loadMoreButton.classList.add("hide"),e.observeTarget.classList.remove("hide"),u.observe(e.observeTarget)):(u.unobserve(e.observeTarget),e.observeTarget.classList.add("hide"),e.loadMoreButton.classList.remove("hide"));else return}async function G(t){t.preventDefault(),L=!0;let r=!!e.iternalScrollOption.checked;if(l=0,i=1,u.unobserve(e.observeTarget),e.observeTarget.classList.contains("hide")||e.observeTarget.classList.add("hide"),e.loadMoreButton.classList.contains("hide")||e.loadMoreButton.classList.add("hide"),x(),e.loaderSign.classList.remove("hide"),e.loadMoreButton.classList.add("hide"),d=t.target.elements.query.value,d.trim()!==""){const a=await y(d,i);a.hits==0?(e.loaderSign.classList.add("hide"),q()):(e.loaderSign.classList.add("hide"),f(a.hits),p.refresh(),l=Math.ceil(a.total/g),l>1&&(r?(e.observeTarget.classList.remove("hide"),u.observe(e.observeTarget)):e.loadMoreButton.classList.remove("hide"))),e.searchingForm.reset()}else e.loaderSign.classList.add("hide"),O()}async function P(){i=i+1,e.loaderLoadMore.classList.remove("hide"),e.loadMoreButton.setAttribute("disabled","true"),e.loadMoreButtonTextContent.textContent=h.onLoad;const t=await y(d,i);l=Math.ceil(t.total/g),e.loaderLoadMore.classList.add("hide"),f(t.hits),p.refresh(),e.imagesGalleryItem=document.querySelector(".gallery-item");let r=3*Math.ceil(e.imagesGalleryItem.getBoundingClientRect().height);window.scrollBy({top:r,behavior:"smooth"}),console.log(l),console.log(i),l>i?(e.loadMoreButton.removeAttribute("disabled"),e.loadMoreButtonTextContent.textContent=h.initial):(e.loadMoreButton.removeAttribute("disabled"),e.loadMoreButtonTextContent.textContent=h.initial,e.loadMoreButton.classList.add("hide"),b())}let p=new S(".gallery a",{captionsData:"alt",captionDelay:250});
//# sourceMappingURL=commonHelpers.js.map
