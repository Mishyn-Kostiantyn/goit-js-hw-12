{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import Axios from \"axios\";\nimport showErrorMessage from \"../main\";\n\n\nexport const numberOfImagesPerPage = 15;\n\nconst specificAxios = Axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    params: { \n        key: '42121047-6dc093e186e55c34fb150394f',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    }\n});\n\nasync function getImageGallery(whatAreWeSearching, pageNumber) {\n    try {\n        const response = await specificAxios.get('', {\n            params: {\n                q: whatAreWeSearching,\n                page: pageNumber,\n                per_page: numberOfImagesPerPage,\n            }\n        });\n        return response.data; \n    } catch (error) {\n        showErrorMessage(error);\n        throw error;\n    }\n}\n\nexport default getImageGallery;\n","\nimport { ref } from \"../main.js\";\n\nexport default function renderImageGallery(images) {\n    const markup = createImageCardMarkup(images);\n    ref.formForImagesGallery.insertAdjacentHTML('beforeend',markup);\n   \n}\n\nfunction createImageCardMarkup(images) {\n  return images.map(({ webformatURL, largeImageURL, tags,likes, views, comments,downloads }) => {\n    return `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n          </a>\n        <ul class=\"image-activity\">\n          <li class=\"image-activity-item\">\n            <h4 class=\"image-activity-type\">Likes</h4>\n            <p>${likes}</p>\n          </li>\n          <li class=\"image-activity-item\">\n            <h4 class=\"image-activity-type\">Views</h4>\n            <p>${views}</p>\n          </li>\n          <li class=\"image-activity-item\">\n            <h4 class=\"image-activity-type\">Comments</h4>\n            <p>${comments}</p>\n            <li class=\"image-activity-item\">\n            <h4 class=\"image-activity-type\">Downloads</h4>\n            <p>${downloads}</p>\n          </li>\n          </li>\n        </ul>\n      </li>`\n  }).join('');\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport getImageGallery from \"./js/pixabay-api\";\nimport renderImageGallery from \"./js/render-function\";\nimport { numberOfImagesPerPage } from \"./js/pixabay-api\";\nexport const ref = {\n    formForInputSearchingParametersForImages: document.querySelector('.input-form'),\n    containerForLoaderSign: document.querySelector('.loader-container'),\n    formForImagesGallery: document.querySelector('.gallery'),\n    loadMoreButton: document.querySelector('.loadMore-button'),\n    loaderForLoadMoreOperation: document.querySelector('.loadMore'),\n    };\nlet totalNumberOfPages = 0;\nlet pageNumber = 1;\nlet searchingTheme = '';\n\nref.formForInputSearchingParametersForImages.addEventListener('submit', onFormSubmit);\nref.loadMoreButton.addEventListener('click', onLoadMoreButtonClick);\n\nfunction showWarningMessage() {\n    iziToast.warning({\n        color: 'red',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topCenter',\n    });\n};\n\nfunction showWarningMessageForEmptyInput() {\n    iziToast.warning({\n        color: 'red',\n    message: 'TYPE SOME WORD/WORDS, PLEASE!',\n    position: 'topCenter',\n    });\n};\n\nfunction showinfoMessage() {\n  iziToast.info({\n      timeout: 3000,\n      message: `We're sorry, but you've reached the end of search results. `,\n      position: 'topCenter',\n    });\n}\n\nfunction deleteImageGalleryMarkup() {\n    ref.formForImagesGallery.innerHTML = '';\n};\n\nfunction showErrorMessage(error) {\n  iziToast.error({\n      timeout: 3000,\n      message: `An error: ${error} occurred while processing your request `,\n      position: 'topCenter',\n    });\n}\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n    totalNumberOfPages = 0;\n    pageNumber = 1;\n    console.log('Page number on Submit:', pageNumber);\n    if (!ref.loadMoreButton.classList.contains('hide')) { ref.loadMoreButton.classList.add('hide'); };\n  deleteImageGalleryMarkup();\n    ref.containerForLoaderSign.classList.remove('hide');\n        ref.loadMoreButton.classList.add('hide');\n     searchingTheme= event.target.elements.query.value;\n    if (searchingTheme.trim() !== '') {\n        const data = await getImageGallery(searchingTheme,pageNumber);\n         if (data.hits == 0) {\n        ref.containerForLoaderSign.classList.add('hide');\n        showWarningMessage();\n      }\n      else {\n        ref.containerForLoaderSign.classList.add('hide');\n          renderImageGallery(data.hits);\n          lightbox.refresh();\n             totalNumberOfPages = Math.ceil(data.total / numberOfImagesPerPage);\n             console.log('total number of page:', totalNumberOfPages);\n             if (totalNumberOfPages > 1) { ref.loadMoreButton.classList.remove('hide'); }\n        \n      } \n    ref.formForInputSearchingParametersForImages.reset()\n    }\n    else {\n    ref.containerForLoaderSign.classList.add('hide');\n    showWarningMessageForEmptyInput();\n  }\n};\n\nasync function onLoadMoreButtonClick() {\n    pageNumber = pageNumber + 1;\n    ref.loadMoreButton.classList.add('hide');\n    ref.loaderForLoadMoreOperation.classList.remove('hide');\n    const data = await getImageGallery(searchingTheme,pageNumber);\n    totalNumberOfPages = Math.ceil(data.total / numberOfImagesPerPage);\n    ref.loaderForLoadMoreOperation.classList.add('hide');\n    renderImageGallery(data.hits);\n    lightbox.refresh();\n    ref.imagesGalleryItem = document.querySelector('.gallery-item');\n    let h = 3*Math.ceil(ref.imagesGalleryItem.getBoundingClientRect().height);\n    console.log(h);\n    window.scrollBy({\n        top: h,\n        behavior: 'smooth',\n    });\n    if (totalNumberOfPages > pageNumber) {\n        ref.loadMoreButton.classList.remove('hide');\n        \n    } else {\n        ref.loadMoreButton.classList.add('hide');\n        showinfoMessage();\n    }\n    \n    \n}\n\nlet lightbox = new SimpleLightbox('.gallery a',\n    {\n    captionsData: 'alt', captionDelay: 250,\n    }\n);\nexport default showErrorMessage"],"names":["numberOfImagesPerPage","specificAxios","Axios","getImageGallery","whatAreWeSearching","pageNumber","error","showErrorMessage","renderImageGallery","images","markup","createImageCardMarkup","ref","webformatURL","largeImageURL","tags","likes","views","comments","downloads","totalNumberOfPages","searchingTheme","onFormSubmit","onLoadMoreButtonClick","showWarningMessage","iziToast","showWarningMessageForEmptyInput","showinfoMessage","deleteImageGalleryMarkup","event","data","lightbox","h","SimpleLightbox"],"mappings":"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"}